---
- name: Create a VM from a template
  hosts: all
  connection: local
  gather_facts: no
  vars_files:
  - vars/vars.yml
  tasks:
  - name: Gather vmware host facts from vCenter
    vmware_host_facts:
      username: "{{ vcenter_user }}"
      password: "{{ vcenter_pass }}"
      esxi_hostname: "{{ esxhost }}"
    register: host_facts
    delegate_to: localhost